<!doctype html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1"
    />
    <link
      id="app-favicon"
      rel="icon"
      type="image/png"
      href="./public/logo.png"
    />
    <link id="app-apple-icon" rel="apple-touch-icon" href="./public/logo.png" />
    <link rel="icon" href="./public/logo.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="./public/logo.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="./public/logo.png" />
    <title>GEC</title>
  </head>

  <body>
    <div id="root"></div>
    <div id="modal-root"></div>
    <script type="module" src="/src/main.tsx"></script>
    <script type="module">
      const {
        VITE_APP_LOGO,
        VITE_APP_TITLE,
        VITE_ANALYTICS_ENDPOINT,
        VITE_ANALYTICS_WEBSITE_ID,
      } = import.meta.env;

      const iconHref = VITE_APP_LOGO || "/favicon.svg";
      const setAttr = (selector, attribute, value) => {
        const element = document.querySelector(selector);
        if (!element) return;
        if (value) {
          element.setAttribute(attribute, value);
        } else {
          element.removeAttribute(attribute);
        }
      };

      if (VITE_APP_TITLE) {
        document.title = VITE_APP_TITLE;
      }

      setAttr("#app-favicon", "href", iconHref);
      setAttr("#app-apple-icon", "href", iconHref);

      if (VITE_ANALYTICS_ENDPOINT && VITE_ANALYTICS_WEBSITE_ID) {
        const analyticsScript = document.createElement("script");
        analyticsScript.defer = true;
        analyticsScript.src = `${VITE_ANALYTICS_ENDPOINT.replace(/\/+$/, "")}/umami`;
        analyticsScript.dataset.websiteId = VITE_ANALYTICS_WEBSITE_ID;
        document.body.appendChild(analyticsScript);
      }
    </script>
  </body>
</html>
